<!DOCTYPE html>
<html lang="zh-HK">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Futu Clone</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Oswald:wght@500;600&display=swap');

        :root {
            --primary-bg: #FFFFFF;
            --secondary-bg: #F5F6F8;
            /* More subtle, premium grey background */
            --text-primary: #191B1F;
            /* Softened black */
            --text-secondary: #8F9296;
            /* Cooler grey */
            --up-green: #00B578;
            --down-red: #F54545;
            --btn-dark: #2A2D35;
            --divider: #ECEEF0;
            --tab-active: #FDF4EB;
            --tab-text-active: #FF6800;
            --nav-height: 50px;
            /* Force extra padding for iPhone Notch/Dynamic Island matching user request */
            --safe-area-top: calc(env(safe-area-inset-top) + 44px);
            --safe-area-bottom: env(safe-area-inset-bottom);
        }

        * {
            box-sizing: border-box;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            /* Priority: SF Pro (iOS) -> Segoe UI (Win) -> Roboto (Android) */
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", "Segoe UI", "Microsoft YaHei UI", "Microsoft YaHei", Roboto, sans-serif;
            background-color: var(--secondary-bg);
            margin: 0;
            padding: 0;
            color: var(--text-primary);
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            user-select: none;
            -webkit-font-smoothing: antialiased;
            /* Critical for iOS premium feel */
            -moz-osx-font-smoothing: grayscale;
        }

        .page {
            display: none;
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding-top: var(--safe-area-top);
            padding-bottom: calc(var(--nav-height) + 20px + var(--safe-area-bottom));
            background-color: var(--secondary-bg);
            height: 100%;
            width: 100%;
            position: absolute;

            top: 0;
            left: 0;
        }

        .page.active {
            display: block;
            z-index: 10;
            animation: fadeIn 0.25s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hide Scrollbar for Chrome/Safari/Opera */
        ::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar for IE, Edge and Firefox */
        .page,
        .sub-tabs,
        .bottom-nav {
            -ms-overflow-style: none;
            /* IE and Edge */
            scrollbar-width: none;
            /* Firefox */
        }

        /* Active State Feedback */
        .nav-item:active,
        .tab-btn:active,
        .holding-item:active,
        .main-action-btn:active,
        .t-btn:active,
        .back-icon:active {
            opacity: 0.7;
            transform: scale(0.98);
            transition: transform 0.05s;
        }

        /* Number Fonts: Use Oswald to mimic DIN, fallback to tabular-nums system font */
        .item-price,
        .item-pl-val,
        .item-pl-pct,
        .total-amount,
        .pl-value,
        .big-price-display {
            font-family: "Oswald", "DIN Alternate", "DIN Condensed", "Roboto Condensed", sans-serif;
            font-variant-numeric: tabular-nums;
            letter-spacing: 0.5px;
            user-select: none;
            -webkit-user-select: none;
        }

        /* Overlay page for Trade (slides up or just appears) */
        .page-overlay {
            z-index: 20;
            background: #fff;
        }

        .editable {
            cursor: text;
            min-width: 10px;
            display: inline-block;
        }

        /* Headers */
        .nav-bar {
            height: 44px;
            background: var(--primary-bg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 0.5px solid transparent;
        }

        .nav-bar.bordered {
            border-bottom: 0.5px solid var(--divider);
        }

        .back-icon {
            width: 24px;
            height: 24px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='15 18 9 12 15 6'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
            transform: rotate(180deg);
            /* Standard back arrow points left */
        }

        .nav-title {
            font-size: 18px;
            font-weight: 600;
        }

        .nav-actions {
            display: flex;
            gap: 16px;
        }

        /* Asset Page Specifics */
        .account-select {
            background: var(--primary-bg);
            padding: 10px 16px;
            display: flex;
            align-items: center;
            font-size: 16px;
            font-weight: 500;
            gap: 8px;
        }

        .flag-icon {
            font-size: 18px;
        }

        .dropdown-arrow {
            width: 12px;
            height: 12px;
            border-right: 2px solid #ccc;
            border-bottom: 2px solid #ccc;
            transform: rotate(45deg);
            margin-bottom: 3px;
        }

        .sub-tabs {
            background: var(--primary-bg);
            display: flex;
            padding: 0 16px 12px;
            gap: 8px;
        }

        .tab-btn {
            padding: 6px 16px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            background: #F5F6F8;
            color: #666;
        }

        .tab-btn.active {
            background: var(--tab-active);
            color: var(--tab-text-active);
            font-weight: 600;
        }

        .asset-card {
            background: var(--primary-bg);
            padding: 10px 20px 20px;
            margin-bottom: 8px;
        }

        .asset-label {
            color: var(--text-secondary);
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 8px;
        }

        .total-amount {
            font-size: 40px;
            font-weight: 900;
            /* Extra Bold */
            font-family: "Roboto", sans-serif;
            /* Back to standard, heavy sans */
            margin-bottom: 20px;
            letter-spacing: -1px;
        }

        .pl-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-bottom: 25px;
        }

        .pl-item {
            display: flex;
            flex-direction: column;
        }

        .pl-value {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 4px;
            font-family: "DIN Alternate", sans-serif;
        }

        .pl-title {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .green-text {
            color: var(--up-green);
        }

        .red-text {
            color: var(--down-red);
        }

        .main-action-btn {
            background-color: var(--btn-dark);
            color: white;
            width: 100%;
            padding: 12px;
            border-radius: 25px;
            text-align: center;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .holdings-section {
            background: var(--primary-bg);
            margin-top: 10px;
            min-height: 400px;
        }

        .holdings-header {
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 0.5px solid var(--divider);
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
        }

        .switch-account-btn {
            padding: 4px 12px;
            border: 1px solid #ddd;
            border-radius: 14px;
            font-size: 12px;
            color: #333;
        }

        .list-header {
            display: flex;
            padding: 10px 16px;
            font-size: 12px;
            color: var(--text-secondary);
            border-bottom: 0.5px solid var(--divider);
        }

        .col-1 {
            width: 35%;
        }

        .col-2 {
            width: 25%;
            text-align: right;
        }

        .col-3 {
            width: 40%;
            text-align: right;
        }

        .holding-item {
            display: flex;
            padding: 16px;
            align-items: center;
            border-bottom: 0.5px solid var(--divider);
        }

        .item-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .item-code {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .market-tag {
            background: #eee;
            padding: 1px 3px;
            font-size: 10px;
            border-radius: 2px;
        }

        .item-price {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .item-pl-val {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .item-pl-pct {
            font-size: 12px;
            text-align: right;
            font-weight: 500;
        }

        /* Generic Placeholders */
        .placeholder-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 60vh;
            color: #999;
            font-size: 14px;
        }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: calc(var(--nav-height) + var(--safe-area-bottom));
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            padding-top: 6px;
            z-index: 200;
            user-select: none;
            -webkit-user-select: none;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 3px;
            color: #888;
            font-size: 10px;
            width: 20%;
        }

        .nav-item.active {
            color: #FF6800;
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            background-color: #888;
            mask-size: contain;
            -webkit-mask-size: contain;
            mask-repeat: no-repeat;
            -webkit-mask-repeat: no-repeat;
            mask-position: center;
            -webkit-mask-position: center;
        }

        .nav-item.active .nav-icon {
            background-color: #FF6800;
        }

        /* Icons */
        .icon-heart {
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
        }

        .icon-gift {
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z'/%3E%3C/svg%3E");
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z'/%3E%3C/svg%3E");
        }

        .icon-globe {
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z'/%3E%3C/svg%3E");
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z'/%3E%3C/svg%3E");
        }

        .icon-compass {
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5l7.51-3.49L17.5 6.5 9.99 9.99 6.5 17.5zm5.5-6.6c.61 0 1.1.49 1.1 1.1s-.49 1.1-1.1 1.1-1.1-.49-1.1-1.1.49-1.1 1.1-1.1z'/%3E%3C/svg%3E");
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5l7.51-3.49L17.5 6.5 9.99 9.99 6.5 17.5zm5.5-6.6c.61 0 1.1.49 1.1 1.1s-.49 1.1-1.1 1.1-1.1-.49-1.1-1.1.49-1.1 1.1-1.1z'/%3E%3C/svg%3E");
        }

        .icon-user {
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E");
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E");
        }

        /* Trade Page Specifics */
        .trade-header-row {
            padding: 12px 16px;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 0.5px solid var(--divider);
        }

        .stock-info-lg {
            font-size: 20px;
            font-weight: 700;
        }

        .stock-code-lg {
            font-size: 14px;
            color: #888;
            margin-left: 8px;
            font-weight: 400;
        }

        .trade-form {
            padding: 16px;
            background: #fff;
        }

        .form-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 0.5px solid var(--divider);
        }

        .form-label {
            font-size: 15px;
            color: #333;
        }

        .form-value {
            font-size: 15px;
            font-weight: 500;
            text-align: right;
            min-width: 100px;
        }

        .big-price-display {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            font-family: "DIN Alternate", sans-serif;
            margin: 10px 0;
        }

        .trade-buttons {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: #fff;
            position: fixed;
            bottom: calc(var(--safe-area-bottom) + 10px);
            width: 100%;
            border-top: 0.5px solid var(--divider);
        }

        .t-btn {
            flex: 1;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
        }

        .bg-green {
            background: var(--up-green);
        }

        .bg-red {
            background: var(--down-red);
        }

        .input-box {
            background: #f5f5f5;
            padding: 8px 12px;
            border-radius: 4px;
            text-align: right;
            border: 1px solid transparent;
        }

        @keyframes spin {
            100% {
                -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }

        .input-box:focus {
            border-color: #FF6800;
            background: #fff;
        }
    </style>
</head>

<body>

    <!-- ============================================== -->
    <!--                 PAGES                          -->
    <!-- ============================================== -->

    <!-- PAGE: WATCHLIST (Ëá™ÈÅ∏) -->
    <div id="page-watchlist" class="page">
        <!-- Header -->
        <div class="nav-bar bordered" style="background:var(--primary-bg);">
            <div class="nav-title" style="flex:1;">Ëá™ÈÅ∏</div>
            <div class="nav-actions">
                <svg width="22" height="22" viewBox="0 0 24 24" stroke="black" stroke-width="2" fill="none">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <svg width="22" height="22" viewBox="0 0 24 24" stroke="black" stroke-width="2" fill="none">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </div>
        </div>

        <!-- Filter Tabs -->
        <div
            style="display:flex; gap:20px; padding:10px 16px; border-bottom:1px solid #eee; background:#fff; font-size:15px; font-weight:500;">
            <div style="color:black; font-weight:600; border-bottom:2px solid black; padding-bottom:6px;">ÂÖ®ÈÉ®</div>
            <div style="color:#666;">Ê∏ØËÇ°</div>
            <div style="color:#666;">ÁæéËÇ°</div>
            <div style="color:#666;">ÊúüË≤®</div>
        </div>

        <!-- Stock List Header -->
        <div style="display:flex; padding:8px 16px; background:#fff; color:#888; font-size:12px;">
            <div style="width:40%;">ÂêçÁ®±‰ª£Á¢º</div>
            <div style="width:30%; text-align:right;">ÊúÄÊñ∞ÂÉπ</div>
            <div style="width:30%; text-align:right;">Êº≤Ë∑åÂπÖ</div>
        </div>

        <!-- Stock Items -->
        <div style="background:#fff;">
            <!-- Item 1 -->
            <div class="holding-item" style="padding:12px 16px;">
                <div class="col-1">
                    <div class="item-name" contenteditable="true">NVIDIA</div>
                    <div class="item-code"><span class="market-tag"
                            style="background:#4A90E2; color:white;">US</span><span contenteditable="true">NVDA</span>
                    </div>
                </div>
                <div class="col-2" style="width:30%;">
                    <div class="item-price" contenteditable="true">135.50</div>
                </div>
                <div class="col-3" style="width:30%;">
                    <div class="item-pl-pct green-text editable"
                        style="background:#E6F9F0; padding:4px 8px; border-radius:4px; display:inline-block;"
                        contenteditable="true">+2.45%</div>
                </div>
            </div>
            <!-- Item 2 -->
            <div class="holding-item" style="padding:12px 16px;">
                <div class="col-1">
                    <div class="item-name" contenteditable="true">Tesla</div>
                    <div class="item-code"><span class="market-tag"
                            style="background:#4A90E2; color:white;">US</span><span contenteditable="true">TSLA</span>
                    </div>
                </div>
                <div class="col-2" style="width:30%;">
                    <div class="item-price" contenteditable="true">365.20</div>
                </div>
                <div class="col-3" style="width:30%;">
                    <div class="item-pl-pct green-text editable"
                        style="background:#E6F9F0; padding:4px 8px; border-radius:4px; display:inline-block;"
                        contenteditable="true">+5.12%</div>
                </div>
            </div>
            <!-- Item 3 -->
            <div class="holding-item" style="padding:12px 16px;">
                <div class="col-1">
                    <div class="item-name" contenteditable="true">Apple</div>
                    <div class="item-code"><span class="market-tag"
                            style="background:#4A90E2; color:white;">US</span><span contenteditable="true">AAPL</span>
                    </div>
                </div>
                <div class="col-2" style="width:30%;">
                    <div class="item-price" contenteditable="true">242.80</div>
                </div>
                <div class="col-3" style="width:30%;">
                    <div class="item-pl-pct red-text editable"
                        style="background:#FFF0F0; padding:4px 8px; border-radius:4px; display:inline-block;"
                        contenteditable="true">-0.35%</div>
                </div>
            </div>
            <!-- Item 4 -->
            <div class="holding-item" style="padding:12px 16px;">
                <div class="col-1">
                    <div class="item-name" contenteditable="true">È®∞Ë®äÊéßËÇ°</div>
                    <div class="item-code"><span class="market-tag"
                            style="background:#F5A623; color:white;">HK</span><span contenteditable="true">00700</span>
                    </div>
                </div>
                <div class="col-2" style="width:30%;">
                    <div class="item-price" contenteditable="true">412.00</div>
                </div>
                <div class="col-3" style="width:30%;">
                    <div class="item-pl-pct green-text editable"
                        style="background:#E6F9F0; padding:4px 8px; border-radius:4px; display:inline-block;"
                        contenteditable="true">+1.50%</div>
                </div>
            </div>
        </div>
    </div>

    <!-- PAGE: CONTRACT (ÂêàÁ¥Ñ) -->
    <div id="page-open" class="page">
        <div class="nav-bar bordered" style="background:#fff;">
            <div class="nav-title" style="flex:1;">ÂêàÁ¥Ñ‰∫§Êòì</div>
            <div class="nav-actions">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </div>
        </div>

        <!-- Sub-navigation for Contracts -->
        <div
            style="display:flex; gap:20px; padding:10px 16px; border-bottom:1px solid #eee; background:#fff; font-size:15px; font-weight:500; overflow-x:auto;">
            <div
                style="color:black; font-weight:600; border-bottom:2px solid black; padding-bottom:6px; white-space:nowrap;">
                ÊàëÁöÑÊåÅÂÄâ</div>
            <div style="color:#666; white-space:nowrap;">ÊåáÊï∏ÊúüË≤®</div>
            <div style="color:#666; white-space:nowrap;">ÈáëÂ±¨ËÉΩÊ∫ê</div>
            <div style="color:#666; white-space:nowrap;">Â§ñÂåØ</div>
            <div style="color:#666; white-space:nowrap;">Âä†ÂØÜË≤®Âπ£</div>
        </div>

        <!-- Summary Card -->
        <div style="margin:10px 16px; background:#2A2D35; border-radius:8px; padding:16px; color:white;">
            <div style="font-size:12px; opacity:0.7; margin-bottom:4px;">ÊúüË≤®Â∏≥Êà∂Ê¨äÁõä (USD)</div>
            <div class="total-amount" style="font-size:28px; margin-bottom:10px; color:white;">4,682,040.50</div>
            <div style="display:flex; justify-content:space-between; font-size:12px;">
                <div>
                    <div style="opacity:0.7;">Á∂≠ÊåÅ‰øùË≠âÈáë</div>
                    <div class="pl-value" style="font-size:14px; margin-top:2px;">1,200,500.00</div>
                </div>
                <div style="text-align:right;">
                    <div style="opacity:0.7;">È¢®Èö™Áéá</div>
                    <div class="pl-value green-text" style="font-size:14px; margin-top:2px;">25.6%</div>
                </div>
            </div>
        </div>

        <!-- Contract List -->
        <div style="background:#fff;">
            <div style="padding:10px 16px; background:#f9f9f9; font-size:13px; color:#666; font-weight:600;">ÁÜ±ÈñÄÂêàÁ¥Ñ</div>

            <!-- Item 1 -->
            <div class="holding-item" style="padding:14px 16px;">
                <div class="col-1">
                    <div class="item-name" contenteditable="true">ÈªÉÈáë‰∏ªÈÄ£</div>
                    <div class="item-code"><span class="market-tag"
                            style="background:#8B572A; color:white;">CMX</span><span
                            contenteditable="true">GCmain</span></div>
                </div>
                <div class="col-2" style="width:30%;">
                    <div class="item-price pl-value" contenteditable="true">2,156.40</div>
                </div>
                <div class="col-3" style="width:30%;">
                    <div class="item-pl-pct green-text pl-value editable"
                        style="background:#E6F9F0; padding:4px 8px; border-radius:4px; display:inline-block;"
                        contenteditable="true">+0.85%</div>
                </div>
            </div>
            <!-- Item 2 -->
            <div class="holding-item" style="padding:14px 16px;">
                <div class="col-1">
                    <div class="item-name" contenteditable="true">ÂéüÊ≤π‰∏ªÈÄ£</div>
                    <div class="item-code"><span class="market-tag"
                            style="background:#000; color:white;">NYM</span><span contenteditable="true">CLmain</span>
                    </div>
                </div>
                <div class="col-2" style="width:30%;">
                    <div class="item-price pl-value" contenteditable="true">78.50</div>
                </div>
                <div class="col-3" style="width:30%;">
                    <div class="item-pl-pct red-text pl-value editable"
                        style="background:#FFF0F0; padding:4px 8px; border-radius:4px; display:inline-block;"
                        contenteditable="true">-1.20%</div>
                </div>
            </div>
            <!-- Item 3 -->
            <div class="holding-item" style="padding:14px 16px;">
                <div class="col-1">
                    <div class="item-name" contenteditable="true">ÂæÆÂûãÁ¥çÊåá</div>
                    <div class="item-code"><span class="market-tag"
                            style="background:#4A90E2; color:white;">CME</span><span
                            contenteditable="true">MNQmain</span></div>
                </div>
                <div class="col-2" style="width:30%;">
                    <div class="item-price pl-value" contenteditable="true">18,520.00</div>
                </div>
                <div class="col-3" style="width:30%;">
                    <div class="item-pl-pct green-text pl-value editable"
                        style="background:#E6F9F0; padding:4px 8px; border-radius:4px; display:inline-block;"
                        contenteditable="true">+0.95%</div>
                </div>
            </div>
        </div>
    </div>

    <!-- PAGE: MARKET (Â∏ÇÂ†¥) -->
    <div id="page-market" class="page">
        <!-- Header -->
        <div class="nav-bar" style="background:#fff; justify-content:space-between; padding:0 16px;">
            <div style="display:flex; align-items:center; gap:8px;">
                <!-- Orange Logo Placeholder -->
                <div
                    style="width:24px; height:24px; background:#FF6800; border-radius:50%; display:flex; align-items:center; justify-content:center;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                        <path d="M12 2L2 22h20L12 2zm0 4l6 14H6l6-14z" />
                    </svg>
                </div>
                <div class="nav-title" style="font-size:20px; font-weight:700;">Â∏ÇÂ†¥</div>
            </div>
            <div class="nav-actions" style="gap:16px;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <div style="position:relative;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    <div
                        style="position:absolute; top:-2px; right:-2px; width:8px; height:8px; background:red; border-radius:50%; border:1px solid #fff;">
                    </div>
                </div>
            </div>
        </div>

        <!-- Scrollable Tabs -->
        <div
            style="background:#fff; padding:6px 16px 0; border-bottom:0.5px solid #eee; display:flex; gap:24px; overflow-x:auto; font-size:15px; color:#666; -webkit-overflow-scrolling: touch;">
            <div style="padding-bottom:10px; white-space:nowrap;">Ê¶ÇÊ≥Å</div>
            <div
                style="padding-bottom:10px; color:#333; font-weight:700; border-bottom:3px solid #FF6800; white-space:nowrap;">
                ÁæéËÇ°</div>
            <div style="padding-bottom:10px; white-space:nowrap;">Êñ∞Âä†Âù°</div>
            <div style="padding-bottom:10px; white-space:nowrap; position:relative;">Âä†ÂØÜË≤®Âπ£ <span
                    style="position:absolute; top:-5px; right:-10px; background:#F54545; color:white; font-size:8px; padding:1px 3px; border-radius:4px;">NEW</span>
            </div>
            <div style="padding-bottom:10px; white-space:nowrap;">Ê∏ØËÇ°</div>
            <div style="padding-bottom:10px; white-space:nowrap;">Êª¨Ê∑±</div>
            <div style="padding-bottom:10px; white-space:nowrap;">ETF</div>
        </div>

        <div style="background:#F5F6F8; padding-top:10px; padding-bottom:80px;"> <!-- Page Content Flow -->

            <!-- Indices Cards (Horizontal Scroll) -->
            <div
                style="display:flex; gap:10px; overflow-x:auto; padding:0 16px; margin-bottom:16px; -webkit-overflow-scrolling: touch;">
                <!-- Dow Jones -->
                <div
                    style="min-width:140px; background:#fff; border-radius:8px; padding:12px; box-shadow:0 2px 4px rgba(0,0,0,0.02);">
                    <div style="font-size:13px; font-weight:600; color:#333; margin-bottom:6px;">ÈÅìÁìäÊñØ</div>
                    <div class="editable pl-value" style="font-size:18px; font-weight:700; color:#F54545;">38,458.05
                    </div>
                    <div style="display:flex; gap:5px; font-size:11px; color:#F54545; margin-bottom:8px;">
                        <span class="editable pl-value">-245.96</span>
                        <span class="editable pl-value">-0.51%</span>
                    </div>
                    <!-- Mini Chart SVG -->
                    <svg width="100%" height="30" viewBox="0 0 100 30" preserveAspectRatio="none">
                        <path d="M0,5 Q20,25 40,15 T100,28" fill="none" stroke="#F54545" stroke-width="1.5" />
                        <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#F54545;stop-opacity:0.1" />
                            <stop offset="100%" style="stop-color:#fff;stop-opacity:0" />
                        </linearGradient>
                        <path d="M0,5 Q20,25 40,15 T100,28 V30 H0 Z" fill="url(#grad1)" stroke="none" />
                    </svg>
                </div>

                <!-- Nasdaq -->
                <div
                    style="min-width:140px; background:#fff; border-radius:8px; padding:12px; box-shadow:0 2px 4px rgba(0,0,0,0.02);">
                    <div style="font-size:13px; font-weight:600; color:#333; margin-bottom:6px;">Á¥çÊñØÈÅîÂÖã</div>
                    <div class="editable pl-value" style="font-size:18px; font-weight:700; color:#F54545;">16,195.17
                    </div>
                    <div style="display:flex; gap:5px; font-size:11px; color:#F54545; margin-bottom:8px;">
                        <span class="editable pl-value">-398.69</span>
                        <span class="editable pl-value">-1.69%</span>
                    </div>
                    <svg width="100%" height="30" viewBox="0 0 100 30" preserveAspectRatio="none">
                        <path d="M0,2 Q25,28 50,18 T100,25" fill="none" stroke="#F54545" stroke-width="1.5" />
                        <path d="M0,2 Q25,28 50,18 T100,25 V30 H0 Z" fill="url(#grad1)" stroke="none" />
                    </svg>
                </div>

                <!-- S&P 500 -->
                <div
                    style="min-width:140px; background:#fff; border-radius:8px; padding:12px; box-shadow:0 2px 4px rgba(0,0,0,0.02);">
                    <div style="font-size:13px; font-weight:600; color:#333; margin-bottom:6px;">Ê®ôÊôÆ500</div>
                    <div class="editable pl-value" style="font-size:18px; font-weight:700; color:#F54545;">5,127.41
                    </div>
                    <div style="display:flex; gap:5px; font-size:11px; color:#F54545; margin-bottom:8px;">
                        <span class="editable pl-value">-73.59</span>
                        <span class="editable pl-value">-1.07%</span>
                    </div>
                    <svg width="100%" height="30" viewBox="0 0 100 30" preserveAspectRatio="none">
                        <path d="M0,8 Q30,28 60,20 T100,28" fill="none" stroke="#F54545" stroke-width="1.5" />
                        <path d="M0,8 Q30,28 60,20 T100,28 V30 H0 Z" fill="url(#grad1)" stroke="none" />
                    </svg>
                </div>
            </div>

            <!-- Function Pills Grid -->
            <div style="display:flex; flex-wrap:wrap; gap:10px; padding:0 16px; margin-bottom:20px;">
                <div
                    style="background:#fff; border-radius:20px; padding:6px 12px; display:flex; align-items:center; gap:6px; font-size:13px; font-weight:500; box-shadow:0 1px 3px rgba(0,0,0,0.03);">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#FF6800" stroke-width="2">
                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                    </svg>
                    <span>ÈÅ∏ËÇ°Âô®</span>
                </div>
                <div
                    style="background:#fff; border-radius:20px; padding:6px 12px; display:flex; align-items:center; gap:6px; font-size:13px; font-weight:500; box-shadow:0 1px 3px rgba(0,0,0,0.03);">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#9B51E0" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <span>Â§úÁõ§</span>
                </div>
                <div
                    style="background:#fff; border-radius:20px; padding:6px 12px; display:flex; align-items:center; gap:6px; font-size:13px; font-weight:500; box-shadow:0 1px 3px rgba(0,0,0,0.03);">
                    <span
                        style="color:#F5A623; font-weight:800; font-size:10px; border:1px solid #F5A623; border-radius:2px; padding:0 2px;">ETF</span>
                    <span>ETF</span>
                </div>
                <div
                    style="background:#fff; border-radius:20px; padding:6px 12px; display:flex; align-items:center; gap:6px; font-size:13px; font-weight:500; box-shadow:0 1px 3px rgba(0,0,0,0.03);">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#00B578" stroke-width="2">
                        <path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path>
                        <path d="M22 12A10 10 0 0 0 12 2v10z"></path>
                    </svg>
                    <span>Á¢éËÇ°</span>
                </div>
                <div
                    style="background:#fff; border-radius:20px; padding:6px 12px; display:flex; align-items:center; gap:6px; font-size:13px; font-weight:500; box-shadow:0 1px 3px rgba(0,0,0,0.03);">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#00B578" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <span>ÂÆöÊäïÂ∞àÂçÄ</span>
                    <div
                        style="background:#F54545; color:white; font-size:8px; padding:0 3px; border-radius:4px; margin-left:-2px;">
                        NEW</div>
                </div>
            </div>

            <!-- IPO Center -->
            <div style="background:#fff; padding:16px; margin-bottom:10px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                    <span style="font-size:16px; font-weight:700;">Êñ∞ËÇ°‰∏≠ÂøÉ</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </div>

                <div style="display:flex; flex-direction:column; gap:16px;">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div style="display:flex; align-items:center; gap:10px;">
                            <div
                                style="width:36px; height:36px; background:#4A90E2; color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700;">
                                U</div>
                            <div>
                                <div style="font-weight:600; font-size:15px;">Uptrend Holdings</div>
                                <div style="font-size:12px; color:#999;">UPX</div>
                            </div>
                        </div>
                        <div class="editable pl-value" style="font-size:14px; color:#333;">2025/12/16</div>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div style="display:flex; align-items:center; gap:10px;">
                            <div
                                style="width:36px; height:36px; background:#F5A623; color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700;">
                                A</div>
                            <div>
                                <div style="font-weight:600; font-size:15px;">Andersen Group</div>
                                <div style="font-size:12px; color:#999;">ANDG</div>
                            </div>
                        </div>
                        <div class="editable pl-value" style="font-size:14px; color:#333;">2025/12/17</div>
                    </div>
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div style="display:flex; align-items:center; gap:10px;">
                            <div
                                style="width:36px; height:36px; background:#666; color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700;">
                                M</div>
                            <div>
                                <div style="font-weight:600; font-size:15px;">Medline</div>
                                <div style="font-size:12px; color:#999;">MDLN</div>
                            </div>
                        </div>
                        <div class="editable pl-value" style="font-size:14px; color:#333;">2025/12/17</div>
                    </div>
                </div>
            </div>

            <!-- HeatMap Strip -->
            <div style="background:#fff; padding:16px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                    <span style="font-size:16px; font-weight:700;">ÁÜ±ÂäõÂúñ</span>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </div>
                <div style="display:flex; gap:4px; overflow-x:auto;">
                    <div style="min-width:120px; background:#FFF0F0; padding:12px; border-radius:4px;">
                        <div style="font-size:13px; font-weight:600; margin-bottom:4px;">‰∫íËÅØÁ∂≤ÂÖßÂÆπ</div>
                        <div class="editable pl-value" style="color:#F54545; font-size:12px; font-weight:500;">-1.08%
                        </div>
                    </div>
                    <div style="min-width:100px; background:#FFF0F0; padding:12px; border-radius:4px;">
                        <div style="font-size:13px; font-weight:600; margin-bottom:4px;">ÂçäÂ∞éÈ´î</div>
                        <div class="editable pl-value" style="color:#F54545; font-size:12px; font-weight:500;">-5.16%
                        </div>
                    </div>
                    <div style="min-width:110px; background:#FFF0F0; padding:12px; border-radius:4px;">
                        <div style="font-size:13px; font-weight:600; margin-bottom:4px;">Âü∫Á§éË®≠ÊñΩ</div>
                        <div class="editable pl-value" style="color:#F54545; font-size:12px; font-weight:500;">-1.64%
                        </div>
                    </div>
                    <div style="min-width:100px; background:#E6F9F0; padding:12px; border-radius:4px;">
                        <div style="font-size:13px; font-weight:600; margin-bottom:4px;">Ê∂àË≤ªÈõªÂ≠ê</div>
                        <div class="editable pl-value" style="color:#00B578; font-size:12px; font-weight:500;">+0.09%
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- PAGE: DISCOVER (ÁôºÁèæ) -->
    <div id="page-discover" class="page">
        <div class="nav-bar bordered" style="background:#fff;">
            <div class="nav-title">ÁôºÁèæ</div>
        </div>
        <div style="background:#fff;">
            <div style="padding:15px; border-bottom:0.5px solid #eee;">
                <div style="font-weight:600; font-size:16px; margin-bottom:5px;">ÁæéËÅØÂÑ≤ÊöóÁ§∫ÊòéÂπ¥ÂèØËÉΩÈôçÊÅØ‰∏âÊ¨°ÔºåÂ∏ÇÂ†¥Ê≠°È®∞</div>
                <div style="display:flex; justify-content:space-between; color:#999; font-size:12px;">
                    <span>ËèØÁàæË°óÊó•Â†± ¬∑ 10ÂàÜÈêòÂâç</span>
                    <span>12.4k Èñ±ËÆÄ</span>
                </div>
            </div>
            <div style="padding:15px; border-bottom:0.5px solid #eee;">
                <div style="font-weight:600; font-size:16px; margin-bottom:5px;">Â§ßÊë©ÔºöÁúãÂ•ΩÂçäÂ∞éÈ´îÊùøÂ°äÂæ©Áî¶ÔºåÈ¶ñÈÅ∏ NVIDIA</div>
                <div style="display:flex; justify-content:space-between; color:#999; font-size:12px;">
                    <span>Êë©Ê†πÂ£´‰∏πÂà© ¬∑ 30ÂàÜÈêòÂâç</span>
                    <span>8.2k Èñ±ËÆÄ</span>
                </div>
            </div>
            <div style="padding:15px; border-bottom:0.5px solid #eee;">
                <div style="font-weight:600; font-size:16px; margin-bottom:5px;">„ÄêÂàÜÊûê„ÄëÊØîÁâπÂπ£Á™ÅÁ†¥10Ëê¨ÁæéÂÖÉÈóúÂè£ÂæåÁöÑËµ∞Âã¢ÂàÜÊûê</div>
                <div style="display:flex; justify-content:space-between; color:#999; font-size:12px;">
                    <span>ÂçÄÂ°äÈèàÊó•Â†± ¬∑ 1Â∞èÊôÇÂâç</span>
                    <span>25k Èñ±ËÆÄ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 1. ASSETS PAGE (Me) -->
    <div id="page-me" class="page active">
        <!-- Re-added top padding shim for when not in standalone mode but browser bar is hidden? 
             Actually handled by page padding-top env. -->

        <!-- Navbar -->
        <div class="nav-bar">
            <div class="back-icon" onclick="history.back()"></div> <!-- "Fake" back -->
            <div class="nav-title">Ë≠âÂà∏Â∏≥Êà∂</div>
            <div class="nav-actions">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                    <polyline points="16 6 12 2 8 6"></polyline>
                    <line x1="12" y1="2" x2="12" y2="15"></line>
                </svg>
            </div>
        </div>

        <div class="account-select">
            <span class="flag-icon">üá∫üá∏</span>
            <span>ÁæéÂúãÊúüË≤®Â∏≥Êà∂</span>
            <div class="dropdown-arrow"></div>
        </div>

        <div class="sub-tabs">
            <div class="tab-btn active">Ë≥áÁî¢</div>
            <div class="tab-btn">Ê≠∑Âè≤</div>
            <div class="tab-btn">Ë≥áÁî¢ÂàÜÊûê</div>
        </div>

        <div class="asset-card">
            <div class="asset-label">
                <span>Ë≥áÁî¢Ê∑®ÂÄº ¬∑ ÁæéÂÖÉ</span>
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#999" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
            </div>

            <div class="total-amount editable" id="total-asset-val">13,380,541.96</div>

            <div class="pl-grid">
                <div class="pl-item">
                    <span class="pl-value green-text editable">+3,384,204.00</span>
                    <span class="pl-title">ÊåÅÂÄâÁõàËôß</span>
                </div>
                <div class="pl-item">
                    <span class="pl-value editable" id="today-pl-val">0.00</span>
                    <span class="pl-title">‰ªäÊó•ÁõàËôß</span>
                </div>
                <div class="pl-item text-right">
                    <span class="pl-value editable" id="today-pl-pct">0.00%</span>
                    <span class="pl-title">‰ªäÊó•ÁõàËôßÊØî‰æã</span>
                </div>
            </div>

            <div style="display:flex; justify-content:center; padding-bottom:15px;">
                <div
                    style="width:10px; height:10px; border-right:1px solid #ccc; border-bottom:1px solid #ccc; transform:rotate(45deg);">
                </div>
            </div>

            <div class="main-action-btn" onclick="openTradePage()">‰∫§Êòì</div>
        </div>

        <div class="holdings-section">
            <div class="holdings-header">
                <div class="section-title">
                    <span>ÊåÅÂÄâ(1)</span>
                    <span style="font-size:14px; color:#888; margin-left:8px;">Ë®ÇÂñÆ(0)</span>
                </div>
                <div class="switch-account-btn">Ë≥áÈáëË™øÊí•</div>
            </div>

            <div class="list-header">
                <div class="col-1">ÊåÅÂÄâÊúüË≤®</div>
                <div class="col-2">Êï∏Èáè</div>
                <div class="col-3">ÁèæÂÉπ/ÈñãÂÄâÂÉπ</div>
            </div>

            <div class="holding-item">
                <div class="col-1">
                    <div class="item-name">ÈªÉÈáë2602</div>
                    <div class="item-code">
                        <span class="market-tag" style="background:#4A90E2; color:white; padding:1px 2px;">F</span>
                        <span>GC2602.US</span>
                    </div>
                </div>
                <div class="col-2">
                    <div class="item-price editable">456</div>
                </div>
                <div class="col-3">
                    <div class="item-pl-val editable">4329.80</div>
                    <div class="item-pl-pct green-text editable">+3,384,204.00</div>
                    <div class="editable" style="font-size:12px; color:#999; text-align:right;">4254.60</div>
                </div>
            </div>

            <!-- Filler Item -->
            <div class="holding-item">
                <div class="col-1">
                    <div class="item-name">Á¥çÊñØÈÅîÂÖã100</div>
                    <div class="item-code">
                        <span class="market-tag" style="background:#4A90E2; color:white; padding:1px 2px;">F</span>
                        <span>NQ2503.US</span>
                    </div>
                </div>
                <div class="col-2">
                    <div class="item-price editable">10</div>
                </div>
                <div class="col-3">
                    <div class="item-pl-val editable">18,500.50</div>
                    <div class="item-pl-pct red-text editable">-1,204.00</div>
                    <div class="editable" style="font-size:12px; color:#999; text-align:right;">18,600.00</div>
                </div>
            </div>
        </div>
    </div>


    <!-- 2. TRADE PAGE (Overlay) -->
    <div id="page-trade" class="page page-overlay">
        <!-- Simple Top Action Bar -->
        <div class="nav-bar bordered">
            <div class="back-icon" onclick="closeTradePage()"></div>
            <div class="nav-title" contenteditable="true">‰∫§Êòì‰∏ãÂñÆ</div>
            <div class="nav-actions">
                <img src="" alt="" style="width:24px;"> <!-- Spacer -->
            </div>
        </div>

        <div class="trade-header-row">
            <div>
                <span class="stock-info-lg" contenteditable="true">Á¥çÊñØÈÅîÂÖã100</span>
                <span class="stock-code-lg" contenteditable="true">NQ2503.US</span>
            </div>
            <div>
                <span class="market-tag" style="background:#ddd; width:20px; text-align:center;">F</span>
            </div>
        </div>

        <div class="trade-form">
            <div style="text-align:center; padding:10px 0;">
                <div class="big-price-display pl-value" contenteditable="true">18,500.50</div>
                <div class="pl-value" style="color:var(--down-red); font-size:14px;" contenteditable="true">-73.50
                    (-0.45%)</div>
            </div>

            <div class="form-row">
                <span class="form-label" contenteditable="true">Ë®ÇÂñÆÈ°ûÂûã</span>
                <span class="form-value" contenteditable="true">ÈôêÂÉπÂñÆ ></span>
            </div>

            <div class="form-row">
                <span class="form-label">ÂÉπÊ†º</span>
                <div class="form-value input-box editable pl-value" contenteditable="true">18500.50</div>
            </div>

            <div class="form-row">
                <span class="form-label">Êï∏Èáè</span>
                <div class="form-value input-box editable pl-value" contenteditable="true">1</div>
            </div>

            <div class="form-row">
                <span class="form-label">ÈáëÈ°çÈ†ê‰º∞</span>
                <span class="form-value pl-value" contenteditable="true">$3,600.00</span>
            </div>
        </div>

        <div class="trade-buttons">
            <div class="t-btn bg-green" contenteditable="true" style="margin-right:10px;">Ë≤∑ÂÖ•</div>
            <div class="t-btn bg-red" contenteditable="true">Ë≥£Âá∫</div>
        </div>
    </div>


    <!-- 3. OTHER PAGES -->
    <div id="page-watchlist" class="page">
        <div class="nav-bar bordered">
            <div class="nav-title" style="margin:auto;">Ëá™ÈÅ∏</div>
        </div>
        <div class="placeholder-content">Ëá™ÈÅ∏ÂàóË°®</div>
    </div>
    <div id="page-open" class="page">
        <div class="nav-bar bordered">
            <div class="nav-title" style="margin:auto;">ÈñãÊà∂</div>
        </div>
        <div class="placeholder-content">ÈñãÊà∂Ê¥ªÂãïÈ†ÅÈù¢</div>
    </div>
    <div id="page-market" class="page">
        <div class="nav-bar bordered">
            <div class="nav-title" style="margin:auto;">Â∏ÇÂ†¥</div>
        </div>
        <div class="placeholder-content">ÂÖ®ÁêÉÂ∏ÇÂ†¥Ë°åÊÉÖ</div>
    </div>
    <div id="page-discover" class="page">
        <div class="nav-bar bordered">
            <div class="nav-title" style="margin:auto;">ÁôºÁèæ</div>
        </div>
        <div class="placeholder-content">ÁâõÁâõÂúàËàáË≥áË®ä</div>
    </div>


    <!-- BOTTOM NAVIGATION -->
    <div class="bottom-nav">
        <div class="nav-item" onclick="switchTab('page-watchlist', this)">
            <div class="nav-icon icon-heart"></div>
            <span>Ëá™ÈÅ∏</span>
        </div>
        <div class="nav-item" onclick="switchTab('page-market', this)">
            <div class="nav-icon icon-globe"></div>
            <span>Â∏ÇÂ†¥</span>
        </div>
        <div class="nav-item" onclick="switchTab('page-open', this)"> <!-- Reusing page-open ID for Contract -->
            <div class="nav-icon"
                style="mask-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\'/%3E%3C/svg%3E'); -webkit-mask-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\'/%3E%3C/svg%3E');">
            </div>
            <span>ÂêàÁ¥Ñ</span>
        </div>
        <div class="nav-item" onclick="switchTab('page-discover', this)">
            <div class="nav-icon icon-compass"></div>
            <span>ÁôºÁèæ</span>
        </div>
        <div class="nav-item active" onclick="switchTab('page-me', this)">
            <div class="nav-icon icon-user"></div>
            <span>ÊàëÁöÑ</span>
        </div>
    </div>

    <script>
        let startY = 0;
        let currentY = 0;
        let isPulling = false;
        const spinner = document.getElementById('refresh-spinner');

        // Pull to Refresh Logic
        document.addEventListener('touchstart', (e) => {
            const activePage = document.querySelector('.page.active');
            if (activePage.scrollTop === 0) {
                startY = e.touches[0].clientY;
                isPulling = true;
            }
        }, { passive: false });

        document.addEventListener('touchmove', (e) => {
            if (!isPulling) return;
            currentY = e.touches[0].clientY;
            let diff = currentY - startY;
            if (diff > 0 && diff < 150) {
                spinner.style.top = (diff / 2 - 40) + 'px';
            }
        }, { passive: false });

        document.addEventListener('touchend', () => {
            if (!isPulling) return;
            isPulling = false;
            let diff = currentY - startY;
            if (diff > 80) {
                spinner.style.top = '10px';
                setTimeout(() => {
                    spinner.style.top = '-40px';
                }, 1500);
            } else {
                spinner.style.top = '-40px';
            }
        });

        // Tab Switching
        function switchTab(pageId, navEl) {
            let pages = ['page-watchlist', 'page-open', 'page-market', 'page-discover', 'page-me'];
            pages.forEach(pid => {
                document.getElementById(pid).classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            navEl.classList.add('active');
        }

        // Trade Page
        function openTradePage() {
            document.getElementById('page-trade').classList.add('active');
            document.querySelector('.bottom-nav').style.display = 'none';
        }

        function closeTradePage() {
            document.getElementById('page-trade').classList.remove('active');
            document.querySelector('.bottom-nav').style.display = 'flex';
        }

        // --- SECURE EDIT LOGIC (Long press 8s) ---
        let pressTimer;
        // Select only elements meant to be editable financial figures
        // We will remove contenteditable from HTML first, then add listener here
        const editableTargets = document.querySelectorAll('.editable, .total-amount, .pl-value, .item-price, .item-pl-val, .item-pl-pct, .big-price-display');

        editableTargets.forEach(el => {
            // Remove default contenteditable if present in HTML to be safe
            el.removeAttribute('contenteditable');

            el.addEventListener('touchstart', (e) => {
                pressTimer = setTimeout(() => {
                    makeEditable(el);
                    // Optional: Vibrate to indicate success
                    if (navigator.vibrate) navigator.vibrate(200);
                }, 8000); // 8 seconds
            });

            el.addEventListener('touchend', () => {
                clearTimeout(pressTimer);
            });

            el.addEventListener('mousedown', () => { // For PC testing
                pressTimer = setTimeout(() => {
                    makeEditable(el);
                }, 8000);
            });
            el.addEventListener('mouseup', () => {
                clearTimeout(pressTimer);
            });
        });

        function makeEditable(element) {
            element.contentEditable = "true";
            element.focus();
            // Add a temporary outline so user knows it's active
            element.style.outline = "2px solid #FF6800";

            // Once they click away (blur), save and lock again
            element.addEventListener('blur', function lockdown() {
                element.contentEditable = "false";
                element.style.outline = "none";
                element.removeEventListener('blur', lockdown);

                // Specific logic for Auto-Calculation of P&L %
                if (element.id === 'today-pl-val') {
                    calcPLPercentage();
                }
            });
        }

        function calcPLPercentage() {
            const totalEl = document.getElementById('total-asset-val');
            const plEl = document.getElementById('today-pl-val');
            const pctEl = document.getElementById('today-pl-pct');

            if (!totalEl || !plEl || !pctEl) return;

            // Remove commas and possible symbols for parsing
            let totalVal = parseFloat(totalEl.innerText.replace(/,/g, '').replace(/[^\d.-]/g, ''));
            let plVal = parseFloat(plEl.innerText.replace(/,/g, '').replace(/[^\d.-]/g, ''));

            if (isNaN(totalVal) || isNaN(plVal)) return;

            // Logic: Yesterday's Asset = Total - TodayPL
            // Percentage = (TodayPL / YesterdayAsset) * 100
            // Note: If TodayPL is positive, Yesterday was smaller.
            let yesterdayVal = totalVal - plVal;

            if (yesterdayVal === 0) return;

            let pct = (plVal / yesterdayVal) * 100;
            let sign = pct > 0 ? '+' : '';
            let formattedPct = sign + pct.toFixed(2) + '%';

            pctEl.innerText = formattedPct;

            // Update Color
            pctEl.classList.remove('green-text', 'red-text');
            if (pct > 0) {
                pctEl.classList.add('green-text');
                pctEl.style.color = '#00B578';
            } else if (pct < 0) {
                pctEl.classList.add('red-text');
                pctEl.style.color = '#F54545';
            } else {
                pctEl.style.color = '#191B1F';
            }
        }
    </script>
</body>

</html>